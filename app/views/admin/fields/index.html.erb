<% content_for :top_bar do %>
  <div class="navbar-brand page-title">
    <i class="fa fa-map-signs"></i>
    Fields
  </div>
<% end %>

<%= admin_content_box do %>
  <div class="nav-tabs-custom">
    <ul class="nav nav-tabs">
      <li class="active">
        <a href="#list" data-toggle="tab">List</a>
      </li>
      <li>
        <a href="#map" data-toggle="tab">Map</a>
      </li>
    </ul>
  </div>

  <div class="tab-content">
    <div class="tab-pane active" id="list">
      <%= react_component(
        'Admin.FieldsIndex',
        render(template: 'admin/fields/index.json.jbuilder'),
        {}) %>
    </div>
    <div class="tab-pane" id="map">
      <div id="map-canvas" style="width:100%; height: 700px;"></div>
    </div>
  </div>
<% end %>

<script>
  $( document ).ready(function() {
    fieldCreator = new Admin.FieldsCreator(
      <%= @map.location %>,
      <%= @map.zoom %>,
      <%= raw @fields.to_json %>
    );
  });
</script>
