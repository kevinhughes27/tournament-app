<div class="container-fluid">
  <h1>Seeds</h1>

  <%= render 'shared/set_errors', set: @teams %>

  <%= form_tag admin_tournament_seeding_index_path(@tournament), "bind-event-submit" => "seedsTables.save(this)" do %>
    <% team_groups = @teams.group_by{ |t| t.division } %>
    <ul class="nav nav-tabs" style="padding-top: 20px;">
      <% team_groups.each_with_index do |(division, teams), idx| %>
        <li class="<%= 'active' if idx == 0 %>">
          <a href="#<%= division_html_id(division) %>" data-toggle="tab"><%= division %></a>
        </li>
      <% end %>
    </ul>
    <div class="tab-content" style="padding-top: 30px;">
      <% team_groups.each_with_index do |(division, teams), idx| %>
        <div class="tab-pane <%= 'active' if idx == 0 %>" id="<%= division_html_id(division) %>">
          <div class="row">
            <div class="col-md-6 col-md-offset-1">
              <%= render 'division', teams: teams %>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <div class="row">
      <%= submit_tag 'Save', class: "btn btn-primary pull-right" %>
    </div>
  <% end %>
</div>

<script>
  $( document ).ready(function() {
    tableNodes = $('.editable-table');
    seedsTables = new Admin.SeedsTable(tableNodes);

    $('.nav-tabs').stickyTabs();
  });
</script>
