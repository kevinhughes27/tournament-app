<div id="schedule-card" class="box box-solid">
  <div class="box-body">
    <div class="schedule-table">
      <table class="table table-bordered table-striped table-hover table-condensed">
        <thead>
          <tr>
            <th class="redips-mark">Time</th>
            <% @fields.each do |field| %>
              <th class="redips-mark"><%= field.name %></th>
            <% end %>
          </tr>
        </thead>

        <tbody>
          <% @times.each_with_index do |time, index| %>
            <tr>
              <td class="time redips-mark">
                <input type="text"
                       class="td-input form-control"
                       value="<%= time.to_formatted_s(:schedule) %>"
                       bind-event-blur="timeUpdated(event)">
              </td>
              <% @fields.each do |field| %>
                <% game = @games.detect{ |g| g.field_id == field.id && g.start_time == time } %>
                <td class="dropzone"
                    data-field-id="<%= field.id %>"
                    data-field-name="<%= field.name %>">
                  <% if game %>
                    <div class="game redips-drag"
                         style="<%= color_for_game(game) %>"
                         data-game-id="<%= game.id %>"
                         data-division-id="<%= game.division_id %>"
                         data-field-id="<%= field.id %>"
                         data-start-time="'<%= time %>'"
                         data-row-idx="<%= index %>">
                      <%= game_draggable_text(game) %>
                    </div>
                  <% end %>
                </td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
